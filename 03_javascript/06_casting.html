<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>형변환</title>
</head>
<body>
    <h1>형변환</h1>
    <h2>문자열, 숫자간 산술연산</h2>
    <input type="button" value="자동형변환" onclick="test1();">
    <input type="button" value="명시적형변환" onclick="test2();">
    <script>

        /**
         * 명시적 형변환
         * Number() : 숫자 외의 문자가 있다면 NaN을 리턴
         * parseInt() : 정수로 형변환. 문자가 있다고 해도, 좌측부터 변환이 가능한데까지는 변환.
         * parseFloat() : 실수로 형변환. 문자가 있다고 해도, 좌측부터 변환이 가능한데까지는 변환.
         */
        function test2(){
            var money = '$1000.50원';
            // money = money.replace('$',''); 
            money = money.replace(/[^0-9.]/g, '');    //정규표현식을 통해 숫자 아닌 문자를 먼저 제거
                                                      //0~9까지 .을 제외하고는 모두 제거
            console.log(Number(money));
            console.log(parseInt(money));
            console.log(parseFloat(money));
        }

        /**
         * 자동 형변환
         */
        function test1(){
            console.log('7'+7);
            console.log(typeof('7'+7)); //string
            
            console.log('7'-7);
            console.log(typeof('7'-7)); //number

            console.log('7'*7);
            console.log(typeof('7'*7)); //number

            console.log('7'/7);
            console.log(typeof('7'/7)); //number

            console.log('7'%7);
            console.log(typeof('7'%7)); //number

            console.log('7'==7)
            console.log(typeof('7'==7)); //boolean

            console.log('abc'==7)          //NaN -> Not a Number
                                           //오류는 발생하지 않았고, NaN을 리턴
            console.log(typeof('abc'==7)); //number
        }
    </script>

    <p>@실습문제 : 사용자에게 두 실수를 입력받고, 결과버튼을 눌렀을 때 두 수의 합을 출력하세요.</p>
    <ul style="list-style:none;">
        <li><input type="number" name="num1" id="num1"></li>
        <li><input type="number" name="num2" id="num2"></li>
        <li><input type="button" value="결과" onclick="test3();"></li>
    </ul>

    <script>
        function test3(){
            // var num1 = document.getElementById('num1').value;
            // var num2 = document.getElementById('num2').value;
            // alert(parseInt(num1) + parseInt(num2));
            // 무조건 string으로 가져온다. 
            console.log(parseInt(num1.value) + parseInt(num2.value));
        }
    </script>

    <h2>NaN | Infinity </h2>
    <input type="button" value="실행" onclick="test4();">

    <script>
        /**
         * NaN Not a Number 숫자가 아니다
         * Infinity 무한대
         */
        function test4(){
            console.log(10 / 0);
            console.log(typeof(10 / 0));
            
            //isNaN() : NaN 여부 확인 NaN이면 true, NaN이 아니면 false;
            var num = prompt("수를 입력하세요."); //string
            if(isNaN(num)){
                alert("숫자가 아닙니다.");
            }else{
                alert("숫자입니다.");
            }
        }
    </script>

    <h2>논리형으로 자동형변환</h2>
    <input type="button" value="실행" onclick="test5();">
    <script>   
        function test5(){
            /**
             * 값이 있는 것은 true로 자동 형변환
             * 값이 없는 것은 false로 자동 형변환
             */
            //1, -1, "안녕", document.getElementById("num1213")은 값이 있으므로 true로 자동 형변환
            //document.getElementById("num1213") -> null은 값이 없어 false로 변환
            //undefined, NaN, null, 0, 빈 문자열은 false로 처리함.
            if(document.getElementById("num1213")){
                console.log('참');
            }else{
                console.log('거짓');
            }

            //사용자 입력값 체크
            var s = prompt("아무말~"); //"아무말", "", null
            if(s)
                console.log(s);
            else
                console.log("아무말도 하지 않았습니다.");
        
            var elem = document.querySelector("#num1"); //1 또는 0개 요소 리턴
            var elem = document.querySelectorAll("'inputttt") //복수개의 요소. 배열 껍데기만 전달됨
                // 따라서 querySelectorAll의 경우에는 길이값을 체크하는 식으로..
            // if(elem){
            if(elem.length){ //length가 0이면 존재하지 않는다.
                //요소가 존재하는 경우
                console.log(elem);
            }else{
                //요소가 존재하지 않는 경우
                console.log("요소가 존재하지 않습니다.");
            }
        }
    </script>

</body>
</html>















